# ユーザーストーリーの分割

- ユーザーストーリーの大きさが1回のイテレーションで完了できないのであれば、分割せざるを得ない

## ユーザーストーリーをいつ分割するのか

- ストーリーが大きすぎて1回のイテレーションに収まらない
- 他のストーリーが入っていて、そのストーリーを入れる余地がない
    - 一部なら実装できる
- ストーリーの分割はより正確な見積もりのためにも有用

## データ境界にそって分割する

- ユーザーが入力できるデータの種類によってストーリーを分割した
    - バランスシートのデータをサマリ入力できる
    - バランスシートにカテゴリごとの入力ができる
    - 1レベル詳細化した項目を扱う
    - 入力値のバリデーション
    - ユーザーとして貸付金の入力画でkリウ
- **大きなストーリーはデータ境界に沿って小さなストーリーに分割すること**

## 操作の境界で分割する

- **大きなストーリーはストーリーでおこなう操作によって分割する**
- **CRUD操作を境界として分割する**

## 横断的な関心事を分離する

- 大抵のアプリケーションには直行する機能がある
    - セキュリティ
    - エラーハンドリング
    - ロギング
- こうした横断的な機能を別のストーリーにするとサイズを小さくできる

## パフォーマンス制約をストーリーにする

- 動くようになってから、早く動かすことを考えろ
- **大きなストーリーの機能要求と非機能要求をそれぞれ個別のストーリーに分割することを検討する**

## 優先度に沿ってストーリーを分割する

- 大きなストーリーを分割する場合には、サブストーリーの優先度に沿って分割すること

## ストーリーをタスク分解してはならない

- ハントとトーマスの教えに従う
    - システムを曳光弾で照らす
- 特定の論理層を1つ完成させるよりも、部分的であってもすべての論理層をまたいで実装するようにする
- ストーリーを曳光弾にするための作戦を考える

## 関連する変更への誘惑を断つ

- 適切なサイズに分割したストーリーに、関連する変更を上乗せしてはならない
- ただし、関連する変更の優先度が同じ場合はこの限りではない

## ストーリーをまとめる

- チームのイテレーション期間が2週間なら、2日〜5日で完了できる大きさにストーリーを分割するのが適切だ
- 一つにまとめたストーリーは個別の小さな見積もりを足し合わせるのではなく、全体を一つの数値で見積もる
    - 1つにまとめたストーリーは互いに関連していた方が優先順位をつけやすい

## まとめ

- ストーリーが1回のイテレーションに収まらないのであれば分割する
- 組み入れる余地がない場合にも分割する
- 分割して見積もったほうが正確な値になる
- 扱うデータによって分割
- 操作に従って分割
- CRUDに従って分割
- 横断的な機能を個別のストーリーにくくりだす
    - セキュリティ、ロギング、エラーハンドリング
- パフォーマンス目標はそれ自体を後で行う
- タスクへ分割してはならない
- ストーリーをリリースするのに直接な関係ないが関連する変更を追加する誘惑を断つこと
- 複数のユーザーストーリーにまとめたほうが適切な場合もある
    - バグ修正のようにひとつひとつはストーリーとしては小さすぎる場合に有効
