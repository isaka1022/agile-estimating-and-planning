# イテレーション計画づくり

- リリース計画があると見通すことができるが、あくまでも高所からの眺めに過ぎない
- イテレーション計画があることでチームはイテレーションでユーザーストーリーを実装することに焦点を絞った、具体的な詳細を考えることができる
- イテレーションのための計画を行うミーティング：イテレーションプランニング
    - 動作するプロダクトに関わる人は参加するべき
- イテレーションプランニングの成果物はタスクをまとめたシート
    - タスクはストーリーと紐付いていること
- カードを使うことで、キーボード入力担当者に権力が集中されない

## イテレーションプランニングではタスクの担当者を決めない

- チームでタスクに取り組んでいるのであれば、担当者を決めるのは当然ではない
- イテレーションプランニングの時点で担当するであろう人がタスクを担当できない可能性もある
- 担当者がサインアップするのはイテレーションが始まってから
    - 一度にサインアップするタスクは1つ、せいぜい2つ
    - 次に着手するのは前にやったものが終わってから
- 自分の空いた時間はチームのために使うし、他のメンバーもそうしてくれると思える

## イテレーション計画とリリース計画の違い

- リリース計画はプロダクトの次のリリースへの見通しを得るもの
    - 3ヶ月から6ヶ月
    - リリース計画ではユーザーストーリーをストーリーポイント課
- イテレーションは目前1つのイテレーションを見通す
    - 2から4週間で見積もる
    - イテレーション計画ではタスクを理想時間で見積もる
- タスクは時間単位で見積もれる
- イテレーションプランニングでは完全に理解したと言えるまで議論を重ねる
- リリース計画のユーザーストーリーはそれぞれが複数のタスクから構成
    - 内容や理解度が曖昧なので、時間で見積もれない
- イテレーション計画の目的は、粗削りのリリース計画から精度を高めたイテレーション計画を立てることにある
- リリース計画では意図的にストーリーに着手する順番を曖昧なままにしている
- イテレーション開始時の方がプロジェクトに対するチームの理解度も深まっている
- アジャイルな計画づくりは2段階にわかれている
    - リリース計画
        - この段階の計画は荒削り、全体的に不確定な部分が残っている
    - イテレーション計画
        - 詳細な計画を建てられる
- イテレーションプランニングは、プロダクトのあり方とソフトウェアの設計をチームが議論するきっかけになる
    - こうした議論を重ねて、チームはプロジェクトに対する理解を深めていく

## ベロシティ駆動イテレーションプランニング

- イテレーションプランニングの手法は2つ
    - ベロシティ駆動
    - コミットメント駆動
- チームは協力して優先度を調整する
- イテレーションでの目標ベロシティを決める
- イテレーションのゴールを選ぶ
- ストーリーをタスクに分解し、それぞれのタスクを見積もる

### 優先順位を調整する

- ビジネスやプロジェクトの状況の変化に応じて優先順位を手早く見直して調整する方が良い
- 新しいイテレーションの優先順位付けは実際にそのイテレーションが始まる数日前に済ませたほうが良い
    - イテレーションレビューとイテレーションプランニングを同じ日に開催しやすくなるから

### 目標ベロシティを決める

- 多くのチームでは、次のイテレーションでは現在のイテレーションで達成したベロシティを使う

### イテレーションのゴールを決める

- イテレーションのゴールは、イテレーション終了時に達成していたいことをごく簡潔に宣言したもの

### ユーザーストーリーを選ぶ

- チームのイテレーションに従ったストーリーを選ぶ

### ユーザーストーリーをタスクに分割する

- それぞれのストーリーを実現するためのタスクへと分解する
- 「計画に何を含めるべきか」
    - ユーザーストーリーをプリダクトに統合して動作させるために必要なすべてのタスクを含めるべき
- テストやドキュメントもタスクとして考慮すること

**プロジェクトに価値を与える作業のみを含める**

- イテレーションに含めるタスクは、現在のプロジェクトに直接価値を与えるものだけにすること
    - メールの返信はタスクには含めない

**慣れるまでは詳細に**

- 例えばユニットテストを書く必要があるのなら、それは個別に見積もってもらう

**ミーティングはタスクに含める**

- ミーティングの準備にかかる時間も含める

**バグ**

- イテレーションないで見つかったバグはそのイテレーション内で修正する
- 実装中に見つかったバグを修正するまでの時間を含むようにする
    - 実装とバグ修正を1つのタスクにしておいて、すべてのテストが通るまでは完了とみなさない、とか
- あとから発見された不具合はユーザーストーリーと同じように扱う

**依存関係の扱い**

- ユーザーストーリーの順番には自然な順番がある
    - 見積もり時の順番と同じ場合が多い
- ストーリーを実装する順番を変えても問題にはならない

**タスクへの分解が難しい場合**

- 影響範囲を見通せなかった
- 「スパイク」と呼ばれる知見を得たり、疑問を解消するのを目的に取り組む作業のこと

### タスクを見積もる

- タスクの見積もり単位は理想時間
- 作業を担当する人の見積もりが最も正確だが、アジャイルプロジェクトではグループで見積もるべき
- イテレーションプランニング段階では担当者をアサインしない
- 他のメンバーもその見積もりに貢献できる
- 複数の意見を集めることで、チーム内の意識の違いを確認できる
- タスクの担当者が見積もってしまうと、見積もりが間違っていたことを後で認めづらい

### 多少の設計はOK

- タスクの洗い出しには設計に関する議論が必要
- イテレーションプランニングの段階では機能の設計についてあまり深く検討しなくて良い
- 計画の段階では設計をダイアグラムに落とし込む必要がない

### タスクの適切なサイズ

- タスクのサイズは1営業日に1つ完了できるくらいが適切
- 開発者1人1人が最低1回はタスクの完了報告ができるようになる
- 1日を超えるタスクもあるが、大きなタスクそのものは作業内容の理解が進んだときに新しいタスクを追加するまでの間の仮のタスクとして扱うべき

## コミットメント駆動のイテレーションプランニング

- ベロシティ駆動のイテレーションプランニングが「昨日の天気」をもとにしてSPや理想日を見積もるのに対して、コミットメント駆動ではチームは実装対象とするストーリーを1つずつ加えていって、これ以上は完成を確約できないといったところでイテレーションの内容を確定させる
- ストーリーを1つ選ぶたびにそれぞれをタスクとして見積もる点が異なる

### チームにコミットできるかたずねる

- チームが成功する秘訣はチームメンバー全員が同意したコミットメント
- フィーチャのリリースを確約するか、タスクの完了を確約するか
- イテレーションの中で新しいタスクが見つかった際に、
    - フィーチャの提供を確約したチームはそれも含めて終わらようとする
    - タスクの完了を確約したチームはそうではない
- もしもタスクが終わらないことがありえそうなら、POと相談してゴールを達成する方法を左宮r
    - ストーリーのフィーチャを縮小する
    - ストーリーをどれか1つにまとめる
- 最初は確約できるように見えるが、ストーリーが加えられていくとそうでもないことに繋がる

### 見積もりを合計する

- ユーザーストーリーにチームがコミットできるか判断するには、それぞれの見積もりの合計が妥当な作業量になっているかどうかをみる
- 見積もりはあくまでも見積もりであって、保証ではない
- イテレーションの作業にコミットする前にチームはタスクをレビューする必要がある
    - なるべくリソースを効率的に使うために、各人が自分の専門外のタスクでも積極的に貢献できないかを模索する

### ひとりひとりのコミットメント

- 担当者がその作業量にコミットできるかで新しいフィーチャを完成させることにコミットできるかどうかを評価する方法がある
- そうしないほうが全員が一丸となって取り組むという態度を育てる
- アサインは一時的なもので、イテレーションが始まったら変更されるものだと考える

### 保守とコミットメント

- チームがイテレーションで完了させるストーリーにコミットするときには、保守とサポートの作業の負荷も考慮しておく
- バグも通常のイテレーションの計画に組み入れるべき
- 保守とサポートとは、事前に予想できないけれどチームの日常として不可避なもの
    - 本番環境のWebサイトやデータベースのサポート、主要顧客からのサポートの電話やテクニカルサポートへの問い合わせ
- イテレーションは空のグラス
    - まずは保守やサポートが入り、残りでイテレーション作業ができる
- サポートの負荷を予想は難しい
    - 長期的な平均はわかる
- サポート作業が少ないイテレーションで当初に確約した以上の作業をこなして置く必要がある

## 私のおすすめ

- コミットメント駆動がおすすめ
- ベロシティは見積もりの精度が粗いので、短期間のイテレーションでそのまま使えるほど正確ではない
- ストーリーポイントやベロシティには誤差がある
- イテレーション計画ではベロシティは使わないようにしている
- ベロシティ計画ではベロシティが極めて有効である
