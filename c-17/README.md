# 不確実性に備えるバッファの計画

- アジャイルな計画は場合によってはうまくいかないのではないか
- 例えば
    - ずっと将来の計画を計画する
    - プロジェクトには定められた締切があり、かつスコープも決まっている
    - プロジェクトが契約で縛られている
    - 要求がごく表面的にしか把握できていない
    - 柔軟なスケジュールでプロジェクトを進めることを、組織が好まない（厳密な納期や成果を定める必要がなくても、厳格なスケジュールが求められる
- 信頼のおける計画を立てられる能力がとりわけ重要になる
- いずれのケースも不確実性がさらにましているか、何か間違いを冒したら深刻な結果を招く
    - こうしたリスクへの備えとs知恵、スケジュールにバッファを組み込む

## フィーチャバッファ

- こちらにあるフィーチャはすべて実装します。うまくいけば、こちらのフィーチャも実装できるかもしれません
- 顧客が必須フィーチャを選ぶ
    - 選んだフィーチャの見積もりを合計する
- 顧客はこれに加えてさらに最低限のフィーチャセットの25%から40%に相当するフィーチャを選ぶ
    - 選べるのはプロジェクト全体の見積もりの上限まで
- 選んだフィーチャをすべて実装することを目標として計画を立てるが、異プションのフィーチャを開発するのは必須フィーチャがすべて実装し終わってから
- DSDM( Dynamic Systems Development Metho )：要求を4種類に分類する
- MosCowルール
    - 必須 Must Have
    - 重要 Should Have
    - 有用 Could Have
    - 不要 Won't Have
- 必須の要求を実現するために割り当てる工数は全体の70%を超えないようにする

## スケジュールバッファ

- 不確実性が高い場合や、期日を守れないと深刻な事態に陥ってしまう場合に備えて、スケジュール全体に対してバッファを設定する

### 見積もりの不確実性を反映する

- 不確実性の高さを計測する
- タスクの完了が早まることは稀だが、タスクが遅れる理由はいくらでもある
- 半分以上の確率でタスクの完了までにには見積もりよりも多く時間がかかる
- 個別マージン
    - それぞれのタスクに幅を持たせる
- 見積もりプロセスを見直して、ユーザーストーリーやフィーチャの見積もりの値を2つにしないといけない

### プロジェクトバッファの大きさを決める

- プロジェクトのバッファの大きさはプロジェクトで計画されている作業のスケジュールのリスクの高さから求める
- 50%の見積もりと90%での見積もりとの間での見積もりの差がプロジェクトバッファのサイズに影響を与える
    - この2つの見積もりの差は２つの標準偏差とほぼ等しくなる
- 二乗和平方根(SRSS法)

### より単純なバッファ計算方法

- すべてのストーリー見積もりを50%見積もりで行って、その合計値の半分をバッファにする
- 個別のユーザーストーリーごとの不確実性が反映されないのが欠点

### バッファのガイドライン

- バッファの大きさの算出にあたっては、二乗和平方根を使うにせよ、50%見積もりを使うにせよ、リーチの提唱するガイドラインを意識する
- 二乗和平方根法のアプローチが最も信頼できるのは、最低でも10以上のユーザーストーリーあるいはフィーチャを見積もっている場合である。もしも見積もり対象となるストーリーの数が10よりも少ない場合は、そもそもプロジェクトバッファを用意すべきではない
- バッファの大きさは、プロジェクト期間全体の少なくとも20%は必要だ
    - 20%より少ないバッファではプロジェクトを守りきれないかもしれない

## 複数のバッファを組み合わせる

- やりすぎに思えても適切な場合も多い
- 小規模プロジェクトで1人とか2人とかの予算バッファを確保できるなら、その分をバッファにしないで最初から使ってしまったほうがよい
    - 生産性が上がるから
- 小さい数字にバッファを準備するのは難しい

## スケジュールバッファは水増しではない

- 水増しとは見積もりに根拠なしに追加している時間のこと
- ３日かかると思っているのに5日かかると言うとか
- スケジュールとフィーチャの両方に柔軟性をもたせられるならプロジェクトバッファを2次元にできる

## 使用上の注意

- スケジュールバッファを加えるときは、50%/90%見積もりを使った2点見積もり法か、50%見積もりによる1点見積もり法のいずれかを使う
- 納期とフィーチャのどちらも交渉可能であることが多く、交渉できるなら交渉すべき
    - バッファを加える手間がかかる
- バッファのことを話題にするなら存在や使い方を秘密にするべきではない
    - 水増しと誤解されないようにする

## まとめ

- プロジェクトの不確実性がスケジュールに反映されるのは稀である
- フィーチャバッファ
    - DSDMで、30%はオプションにすること
- スケジュールバッファ
    - 50%と90%の見積もりを出しながらその差の平方を求めて、合計値を計算すること
